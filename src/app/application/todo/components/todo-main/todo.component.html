<div class="todo-container">
  <h3 class="todo-title">My Todos</h3>

  <!-- Add Todo Form -->
  <div class="todo-input-box">
    <form (submit)="addTodo(25)" class="todo-form">
      <input
        type="text"
        [(ngModel)]="newTodoText"
        name="newTodo"
        placeholder="Add a new todo"
        required
      />
      <button type="submit" class="btn btn-primary">Add Todo</button>
    </form>
  </div>
</div>


  <!-- Todos Table -->
  <div class="table-responsive p-4" *ngIf="(loading$ | async) === false">
    <table class="table table-hover align-middle w-100">
      <thead class="table-light">
        <tr>
          <th style="width: 5%">âœ”</th>
          <th style="width: 70%">Task</th>
          <th style="width: 25%" class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let todo of (todos$ | async)">
          <!-- Checkbox -->
          <td>
            <input
              type="checkbox"
              class="form-check-input"
              [checked]="todo.completed"
              (change)="toggleCompleted(todo)"
            />
          </td>

          <!-- Todo Text -->
          <td>
            <!-- View Mode -->
            <span
              *ngIf="editingTodoId !== todo.id"
              [class.text-decoration-line-through]="todo.completed"
              class="ms-2"
            >
              {{ todo.todo }}
            </span>

            <!-- Edit Mode -->
            <input
              *ngIf="editingTodoId === todo.id"
              type="text"
              [(ngModel)]="editText"
              name="editTodo"
              class="form-control"
              style="max-width: 400px"
            />
          </td>

          <!-- Actions -->
          <td class="text-end">
            <!-- Edit button -->
            <i
              *ngIf="editingTodoId !== todo.id"
              [class]="icons.getIcon('edit') + ' text-primary mx-2'"
              style="cursor: pointer; font-size: 1.2rem"
              title="Edit"
              (click)="startEditing(todo)"
            ></i>

            <!-- Save + Cancel buttons -->
            <i
              *ngIf="editingTodoId === todo.id"
              [class]="icons.getIcon('save') + ' text-success mx-2'"
              style="cursor: pointer; font-size: 1.2rem"
              title="Save"
              (click)="saveEdit(todo)"
            ></i>

            <i
              *ngIf="editingTodoId === todo.id"
              [class]="icons.getIcon('cancel') + ' text-secondary mx-2'"
              style="cursor: pointer; font-size: 1.2rem"
              title="Cancel"
              (click)="cancelEdit()"
            ></i>

            <!-- Delete button -->
            <i
              [class]="icons.getIcon('delete') + ' text-danger mx-2'"
              style="cursor: pointer; font-size: 1.2rem"
              title="Delete"
              (click)="removeTodo(todo)"
            ></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
